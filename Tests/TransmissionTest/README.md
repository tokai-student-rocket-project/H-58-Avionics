# 結果と考察

## 状況

日時: 6/7 18:14-18:31
天候: 晴れ (雲量6-8)

送信地点: 1号館屋上 (35.3657, 139.2732)
受信地点: 6号館屋上 (35.3608, 139.2729)
通信距離: 540 m

## 無線機概要

周波数: 921.8 MHz (LoRa 30ch)
送信電力: 20 mW
拡散率: 7
アンテナ高さ: 屋上から 1 m
アンテナ利得: 1 dBi

帯域幅: 125kHz, 250kHz, 500kHz (条件により変更)
データ長: 32Bytes, 64Bytes, 128Bytes (条件により変更)

## 条件

以下の7つの条件を設定する。

|条件|帯域幅|データ長|
|-|-|-|
|1|125 kHz|32 Bytes|
|2|125 kHz|64 Bytes|
|3|125 kHz|128 Bytes|
|4|250 kHz|32 Bytes|
|5|500 kHz|32 Bytes|
|6|500 kHz|64 Bytes|
|7|500 kHz|128 Bytes|

## 結果

各条件での計測結果を最頻値で示す。

|条件|受信強度 RSSI|送信回数|受信回数|N|
|-|-|-|-|-|
|1|-121 dBm|13.0 Hz|6.5 Hz|1545|
|2|-121 dBm|7.9 Hz|4 Hz|669|
|3|-100 dBm|4.5 Hz|2.2 Hz|191|
|4|-103 dBm|14.9 Hz|7.5 Hz|850|
|5|-104 dBm|43.5 Hz|21.7 Hz|3340|
|6|-105 dBm|26.3 Hz|13.3 Hz|1399|
|7|-103 dBm|15.2 Hz|7.5 Hz|1116|

なお、アンテナ高さを途中で変更しており、設定1,2は屋上から0m、設定3からは屋上から1mとなっている。

## 考察

### 受信強度

条件1,2での受信強度RSSIは-121dBm、条件3からは-100から-105dBmであり、結果から帯域幅は受信強度に影響しないと思われる。

実際、環境による擾乱を考慮しない自由空間での電波の伝搬損失量  $Loss$ (dB) は以下の式で表されるように、単に通信距離と周波数の関数となる。

$Loss$: 伝搬損失量 (dB), $d$: 通信距離 (m), $c$: 光速 ($2.998 \times 10^8$ m/s), $f$: 周波数 (MHz)

$$ Loss = 20 log (\frac{4 \pi d}{\lambda})$$

$$ \lambda = \frac{c}{f} $$

したがって、ロケット打ち上げにおけるダウンリンク及びアップリンクでは、通信速度改善のため帯域幅を広げることは受信強度の観点からは問題ないと考える。

### 送受信回数

送受信回数とは、規定のデータ長が含まれるパケットを1秒間に送信または受信できる回数を表している。これにはマイコン内での処理による遅延も影響する。

結果より帯域幅と送信回数及び、データ長と送信回数の関係がわかる。比較的狭い帯域幅では比例関係に近い関係があるといえる。一方、比較的広い帯域幅では、データ長が短い方が若干伝達効率が上がる結果となった。

![image](https://github.com/tokai-student-rocket-project/H-58-Avionics/assets/64391204/4dc09bd2-83b4-4a7b-a41d-e18fd449acd1)

また、受信回数が送信回数のほぼ半分の値になる現象が見られた。これについては今後検証を進める。

### まとめ

H-58搭載計器においては、帯域幅500kHzで64Bytes程度のデータをダウンリンクする場合10Hz程度の受信が可能であり、データを選定して32Bytes程度に抑えた場合は20Hz程度の受信が可能になる。GNSS情報を10Hzで更新することが可能になったことと合わせ、通信系の大幅な性能向上が見込める。
